# 第二章 计算机系统中的数据表示

By: 诚夏 SincereXIA @ XD Univ.

<a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/cn/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/cn/88x31.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/cn/">知识共享署名-非商业性使用 3.0 中国大陆许可协议</a>(Creative Commons Attribution 3.0 China Mainland License)进行许可。

------



## 数值数据编码

### 概述

1. **机器数: ** 数值在计算机内的二进制表示, 如 11111
2. **真值**: 机器数对应的真实数值, 如 11111 的真值为 15
3. 机器数的分类
   1. 有符号数和无符号数
   2. 定点数和浮点数

### 定点数

> 小数点位置固定的数称为定点数 
>
> 若约定小数点的位置在机器数的最低位之后，则是纯整数；若约定小数点的位置在机器数的最高位之前，则是纯小数。 

1. 原码表示法

   符号位——0正1负；有+0和-0之分，字长8为的范围是-127到+127 

2. 补码表示法

   正数和0 表示同原码, 负数补码为其原码**右数第一个1开始**，**左**边的都取**反**，**右**边的都**不变**

   **无正负0之分**

   负数$[X]_补= 2^n+X$

   表示范围：

   1. 定点整数： $-2^{n-1}\sim2^{n-1}-1$
   2. 定点小数：$-1\sim1-2^{-(n-1)}$

3. 反码表示法
   规则: 正数反码与原码相同；负数补码符号位为1，其余与原码 **各位相反**

   **有正负0之分**

   表示范围:

   1. 定点小数: $-(1-2^{-(n-1)})\sim1-2^{-(n-1)}$

   2. 定点整数:$-(2^{n-1}-1)\sim2^{n-1}-1$

4. 移码表示法

   定义: $[X]_移 = 2^{n-1}+X ,  -2^{n-1}<=X<2^{n-1}$

   **移码可以通过补码符号位取反得到**

   移码特点:

   1. 移码的符号位: 1代表正数, 0代表负数
   2. 移码中的 0 为 1000000
   3. **$[X]_移$ 与 X 成线性正比关系**

**定点数真值与机器数对应关系图**

| 原码                                                         | 补码                                                         | 反码                                                         | 移码                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![mark](http://media.sumblog.cn/blog/180506/5HlGbD8d0D.png?imageslim) | ![mark](http://media.sumblog.cn/blog/180506/IahBl3l7g7.png?imageslim) | ![mark](http://media.sumblog.cn/blog/180506/50fI14h7f7.png?imageslim) | ![mark](http://media.sumblog.cn/blog/180506/c8b67FAD07.png?imageslim) |



### 浮点数表示

| 阶符 | 阶码（纯整数） | 数符 | 尾数（纯小数） |
| ---- | -------------- | ---- | -------------- |
|      | 使用移码表示   |      | 使用补码表示   |

1. 规格化浮点数:

   $M>=0, M=0.1......$

   $M<0, M=1.0.....$       

2. **IEEE 浮点数表示**

   IEEE 754标准规定浮点数的**尾数用原码**（符号位加绝对值）表示。对于用原码表示的规格化的二进制浮点数，**尾数有效位的第一位一定是1**，而不是0，因此在IEEE 754标准中，这个**默认的1也被省去**

   IEEE 浮点数的 **阶码用偏移值为 127 的移码来表示**， 即 **标准移码再-1**

   1. 单精度浮点数（32位）的组成

      | 31     | 30~23               | 22~0                       |
      | ------ | ------------------- | -------------------------- |
      | S 阶符 | E 阶码 （变形移码） | F 尾数（缩写尾数）（原码） |
      | 1位    | 8位                 | 23位                       |

   2. 规格化的真值表示：

      $x=(-1)^S×(1.M)×2^{E-127} $

   3. 非规格化的表示：

      | 单精度格式位模式                      | IEEE浮点数的值                         |
      | ------------------------------------- | -------------------------------------- |
      | e＝0；f≠0（f中至少有一位不为零）      | $(－1)^s×2^{-126}×0.f$  （非规格化数） |
      | e＝0；f＝0（f中所有位均为零）         | $(－1)^s×0.0$  （有符号的零）          |
      | s＝0；e＝255；f＝0（f中所有位均为零） | ＋INF  （正无穷大）                    |
      | s＝1；e＝255；f＝0（f中所有位均为零） | －INF  （负无穷大）                    |
      | e＝255；f≠0（f中至少有一位不为零）    | NaN  （非数）                          |

### 非数值型数据

1. BCD 码

   特殊的BCD码: 2421, 5211, 4311 码:

   1. 对 9 互补, 便于减法运算
   2. 相加和大于10时, 会产生进位

   格雷码: 单位距离码, 编码向下一位变换时, 只有一个二进制位不同,变码速度快

   **BCD 编码的区位:** 1111: 无符号数   1100: 正数    1101:负数

2. ASCII 

   **七位编码**

   数字0~9的高三位编码为: 011, 低四位对应数字的二进制；大写字母: 100, 小写字母: 110



